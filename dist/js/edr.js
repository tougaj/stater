"use strict";var edr;!function(e){var r=$("#divEDRItems"),s="",p={REG_NUM:"Реєстраційний&nbsp;№",DATE_REG:"Дата реєстрації",NAME:"Назва",SHORT_NAME:"Коротка назва",EDRPOU:"ЄДРПОУ",ADRESS:"Адреса",PHONE:"Телефон",GOVERNMENT:"Керівництво",LICENSE:"Ліцензія",FOUNDERS:"Засновники",FOUNDER:"Засновник",ZASNOVN:"Засновник",KVED:"К.В.Е.Д.",STATE:"Стан",BOSS:"Голова",FIO:"П.І.Б.",ADDRESS:"Адреса",STAN:"Стан",REG_DATE:"Дата реєстрації",NAMES_LANG:"Назви",NAME_LANG:"Назва",TYPE_DZMI:"Тип ЗМІ",GOAL_TYPE:"Цільова аудиторія",ADRES:"Адреса",REG_OBJ:"Реєстрант"},a=function(){r.empty().append('<h5 class="text-center"><i class="fa fa-spinner fa-spin fa-lg"></i> Завантаження записів реєстру. Зачекайте...</h5>');var e=$("#fmSearch").serialize();$.getJSON("api/searchEDR.php",e,function(e){r.empty();var a=0;e.forEach(function(e){a+=e.items.length,0!==e.items.length&&t(e)}),0!==a?($("#totalRecCnt span").text(a).closest("p").show(),function(){var e=$("h2",r);if(0!==e.length){var a=$("<div><h1>Зміст</h1></div>"),t=$('<ul class="list-unstyled"></ul>');e.each(function(){var e=$(this).attr("id");$("<li></li>").append($('<a href="#'+e+'"></a>').html($(this).html())).appendTo(t)}),a.append(t).append("<hr>").prependTo(r)}}()):$('<h4 class="text-center text-warning"><i class="fa fa-info-circle fa-lg"></i> За Вашим запитом записів не знайдено. Спробуйте іншу пошукову строку.</h4>').appendTo(r)})},c=function(t,e){if(void 0===e&&(e=!0),"string"==typeof t||"number"==typeof t){var a="";return-1!==t.toUpperCase().replace(/\s{2,}/g," ").indexOf(s)&&"&nbsp;"!==t&&(a='<i class="fa fa-check fa-lg text-success pull-right"></i>'),$("<span></span>").html(t).prepend(a)}var i=[];for(var n in t)i.push(n);if(0===i.length)return c("&nbsp;");if(Array.isArray(t)){var l=$('<ol class="table-item"></ol>');return t.forEach(function(e){$("<li></li>").append(c(e)).appendTo(l)}),l}if(e&&1===i.length)return c(t[i[0]]);var r=$('<table class="table table-bordered table-striped"></table>');return i.map(function(e){var a=p[e]||e;$("<tr></tr>").append('<td title="'+e+'"><b>'+a+"</b></td>").append($("<td></td>").append(c(t[e]))).appendTo(r)}),r},t=function(e){var a=e.items.length;1e3<a&&(a="1000+"),$('<h2 class="text-info" id="r'+e.index+'" style="position: sticky"></h2>').html(e.title+" <small>"+e.subtitle+"</small>").attr("title",e.title+" "+e.subtitle).prepend('<span class="badge pull-right">'+a+"</span>").prepend('<i class="fa fa-book"></i> ').appendTo(r),e.items.forEach(function(e,a){var t;if(void 0===e.WARNING&&void 0===e.RAWDATA){var i=e.NAME||e.FIO||e.NAMES_AGENC;if(void 0===i&&"object"==typeof e.NAMES_LANG){var n=e.NAMES_LANG.NAME_LANG;i=Array.isArray(n)?n.join(" &bullet; "):n}$("<h3></h3>").html(a+1+". "+i).appendTo(r),t=c(e,!1)}else if(void 0!==e.WARNING)t=$('<div class="alert alert-warning"></div>').html('<i class="fa fa-exclamation-triangle fa-lg"></i> <b>УВАГА!</b> '+e.WARNING);else{var l=e.RAWDATA.replace(/</gi,"&lt;").replace(/>/gi,"&gt;<br>");$("<h3></h3>").text(a+1+". "+e.NAME).append("<small> (не структуровані дані)</small>").appendTo(r),t=$('<div class="alert alert-info"></div>').html('<i class="fa fa-info-circle"></i> '+l)}t.appendTo(r)})},i=function(){location.hash=""};$(document).ready(function(){$("#fmSearch").submit(i),""!==(s=$("#eSearchStr").focus().select().val())&&(s=s.toUpperCase().replace(/\s{2,}/g," "),a())})}(edr||(edr={}));